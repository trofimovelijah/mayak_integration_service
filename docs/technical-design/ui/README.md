# 6 Визуализация реализации требований

Разработка админ-панели обоснована необходимостью реализации следующих требований:

* ФТ-013 \- ФТ-017 \- Статистика коммуникаций  
* ФТ-018 \- Управление шаблонами писем  
* ФТ-019 \- Ручная переотправка писем  
* ФТ-024 \- Уведомление о создании События  
* ФТ-025 \- Уведомление об одобрении События  
* ФТ-026 \- Уведомление об отклонении События с причиной  
* НФТ-1.4 \- Время отклика менее 3 секунд  
* НФТ-2.4 \- Механизм повторной отправки при сбоях  
* НФТ-3.1 \- Соблюдение 152-ФЗ  
* НФТ-3.2 \- НФТ-3.5 \- Безопасность API  
* НФТ-5.1 \- Логирование событий системы  
* НФТ-5.2 \- Мониторинг инфраструктуры

Как показано на Диаграмме контейнеров в рамках Сервиса интеграции должна существовать админ-панель, доступ к которой должен быть предоставлен Администратору Платформы.  
Порядок работы следующий.  
Администратор подключается к панели.  
![][image18]  
Администратору доступен стартовый дашборд. Доступна краткая статистика и обзор последних событий Платформы.  
Более подробно визуализация дашборда может быть реализована в случае продолжения работ и уточнения требований.  
![][image19]  
Администратор может перейти в меню модерации, где отображаются все созданные Пользователями Платформы События. Двойным кликом мыши по строке с данными по каждому из Событий открывается отдельное окно с подробной информацией по Сбору. По каждому из них Администратор принимает решение: одобрить или отклонить.  
![][image20]  
На экране со статистикой отображаются данные, указанные в требованиях с ФТ-013 по ФТ-016.   
![][image21]  
Администратору при выборе пункта “*Шаблоны писем*” доступен перечень шаблонов. Либо по поиску, либо по списку можно выбрать нужный шаблон и просмотреть его, а также внести в него изменения. В перспективе реализовать полноценный WYSIWYG текстовый редактор.  
![][image22]  
При выборе пункта “*Переотправка писем*” отображается таблица с неотправленными письмами. Администратор выполняет отправку вручную. Также возможно выполнить экспорт отчёта о неотправленных письмах.  
![][image23]  
Администратор, выбрав пункт меню “*Мониторинг*”, наблюдает мониторинг всех предварительно добавленных узлов Платформы.  
![][image24]  
При необходимости Администратор может посмотреть настроенные логи работы системы в соответствующей таблице.   
![][image25]  
Таким образом Администратору по-умолчанию доступно 8 страниц Админ-панели. Более подробно информация по страницам представлена в таблице ниже.

| № | Страница | URL | Функциональное назначение | Соответствие требованиям |
| ----- | ----- | ----- | ----- | ----- |
| 1 | Аутентификация | /admin/login | Вход администратора с JWT токенами | \- |
| 2 | Главный дашборд | /admin/dashboard | KPI метрики, статус систем, быстрые действия | \- |
| 3 | Модерация Событий | /admin/moderation | Одобрение/отклонение событий с отправкой писем | ФТ-024-026 |
| 4 | Просмотр статистики | /admin/statistics | OR, DR, CTR, CTOR, экспорт отчётов | ФТ-013-017 |
| 5 | Редактирование шаблонов писем | /admin/templates | WYSIWYG редактор, 20+ шаблонов, preview | ФТ-018 |
| 6 | Переотправка писем | /admin/retry\_emails | Ручная переотправка неудачных писем | ФТ-019 |
| 7 | Мониторинг | /admin/monitorings | Health checks, alerts, производительность | НФТ-5.2 |
| 8 | Просмотр логов | /admin/logs | Просмотр и экспорт логов системы | НФТ-5.1 |

Для каждой из страниц необходимо разработать следующие эндпойнты.

| № | Страница | API | Функциональное назначение |
| ----- | ----- | ----- | ----- |
| 1 | Аутентификация | POST /auth/login POST /auth/refresh POST /auth/logout | Вход в админ-панель Обновление JWT доступа  Выход из админ-панели |
| 2 | Главный дашборд | Используются те запросы, которые будет впоследствие принято размещать |  |
| 3 | Модерация Событий | GET /events?status=pending\_moderation GET /events/{event\_id} POST /events/{event\_id}/approve POST /events/{event\_id}/reject | Список Событий Выбор События Одобрение События для размещения на Платформе Отклонение События и неразмещение на Платформе |
| 4 | Просмотр статистики | GET /statistics/summary GET /statistics/export/csv | Статистика по отчётам Экспорт отчёта в CSV |
| 5 | Редактирование шаблонов писем | GET /templates PUT /templates/{template\_id} POST /template | Список шаблонов писем для рассылки Обновление шаблона Добавление нового шаблона (на будущее) |
| 6 | Переотправка писем | GET /retry/list POST /retry/send | Список неотправленных писем Переотправка выбранных писем |
| 7 | Мониторинг | GET /monitoring/services GET /monitoring/queues GET /monitoring/alerts | Статусы составных частей/сервисов Платформы Статусы очереди Алерты |
| 8 | Просмотр логов | GET /logs GET /logs/export/csv | Просмотр логов с фильтрами Экспорт логов в CSV |
