# 5 Моделирование бизнес-процессов Платформы

Для удобства чтения моделированных текущего состояния функционирования Платформы было принято решение представить диаграммы по принципу деления на основные процессы. При необходимости все диаграммы можно объединить воедино, но их читабельность, очевидно, уменьшится. Чтобы понять, насколько реализация текущей работы позволит решить поставленные цели были смоделированы процессы не только в рамках to be, но и as is. Процессы as is реализованы, исходя из информации, представленной Заказчиком.

## 5.1 Процесс работы с жизненным циклом работы с Событие 

**Диаграмма as is**  
На диаграмме **as is** продемонстрирован процесс создания и публикации События, т.е. жизненный цикл продемонстрирован не полностью, без указания активностей, связанных с завершением сбора и закрытием События. Даже несмотря на этот факт, ключевым моментом в данном случае видится необходимость использовать специалиста отдельной роли, который назван условно “*Работник по коммуникациям*”. При этом даже часть жизненного цикла События демонстрирует большое число ручных/неавтоматизированных моментов, которые на себя берёт специалист в данной роли. Уменьшением участия ручных активностей при работе на Платформе является одной из ключевых целей данной работы.  
![](/images/diagrams/bpmn/as%20is:%20creating%20and%20publishing%20an%20event.png)  
Более наглядно диаграмму можно рассмотреть по [ссылке](https://drive.google.com/file/d/1ZkotsOhDbqnyw8x1iU3gu7Hv-dtKuLm6/view?usp=sharing). 

**Диаграмма to be**  
Исходник процесса в нотации **bpmn** размещён по [ссылке](/docs/03_bpmn/to%20be/to%20be:events.bpmn). В рамках процесса работы с жизненным циклом События покрываются следующие требования: 

* ФТ-001 \- ФТ-004  
* ФТ-006  
* ФТ-009  
* ФТ-020 \- ФТ-027

![](/docs/03_bpmn/to%20be/to%20be:events.svg) 
В процессе задействованы логически обособленные функции, которые для удобства чтения и реализации разбиты на отдельные подпроцессы. Как следует из диаграммы **to be** наличествуют пять подпроцессов:

* выполнение регистрации на Платформе,  
* отправка письма о подписке через UnisenderGo,  
* отправка письма о Событии на модерации через UnisenderGo,  
* отправка результата модерации через UnisenderGo,  
* отправка результата сбора через UnisenderGo

Рассмотрим каждый подпроцесс по отдельности.

С подпроцесса “*Выполнение регистрации на Платформе*” начинается работа Пользователя на Платформе. Пользователь либо проходит регистрацию, либо осуществляет прямой вход, если регистрация уже выполнена ранее.   
![](/images/diagrams/bpmn/to%20be:events%20complete%20registration.png)

Подпроцесс “*Отправка письма о подписке через UnisenderGo*”, как и многие подобные подпроцессы используется в рамках автоматизации to be несколько раз. Продемонстрированы различные варианты поведения сервиса интеграции при отправке писем. При получении кодов ответа серии 4XX и 5XX от сервиса UnisenderGo реализовано различное поведение, включая повторные попытки отправки уведомлений.  
![](/images/diagrams/bpmn/to%20be:events%20sending%20subscription%20email.png)
Аналогично предыдущему реализован подпроцесс “*Отправка письма о Событии на модерации через UnisenderGo*”.   
![](/images/diagrams/bpmn/to%20be:events%20sending%20an%20email.png) 
А также подпроцесс “*Отправка результата модерации через UnisenderGo*”.  
![](/images/diagrams/bpmn/to%20be:events%20sending%20moderation%20result.png)

Подпроцесс “*Отправка результата сбора через UnisenderGo*” демонстрирует выбор варианта письма при завершении Сбора и закрытии События.  
![](/images/diagrams/bpmn/to%20be:events%20sending%20collection%20result.png)

## 5.2 Процесс сбора пожертвований и размещения благодарностей 

**Диаграмма as is**

![](/images/diagrams/bpmn/as%20is:%20donation%20and%20gratitude.png)

**Диаграмма to be**  
Исходник процесса в нотации bpmn размещён по [ссылке](/docs/03_bpmn/to%20be/to%20be:donation.bpmn).  
![](/docs/03_bpmn/to%20be/to%20be:donation.svg)
Как следует из диаграммы **to be** наличествуют три подпроцесса:

* валидация и подготовка данных,  
* выбор шаблона письма,  
* отправка письма через UnisenderGo.

Рассмотрим их по отдельности.  
Подпроцесс “Валидация и подготовка данных”  
![Подпроцесс "Валидация и подготовка данных"](/images/diagrams/bpmn/to%20be:donation%20validation%20data%20preparation.png) 
Подпроцесс “Выбор шаблона письма” в зависимости от суммы платежа.  
![Подпроцесс “Выбор шаблона письма”](/images/diagrams/bpmn/to%20be_donation%20choosing%20email%20template.png)  
Подпроцесс “Отправка письма через UnisenderGo  
![Подпроцесс “Отправка письма через UnisenderGo](/images/diagrams/bpmn/to%20be:donation%20sending%20email%20via%20unisender%20go.png)

## 5.3 Процесс выполнения рекуррентных платежей 

**Диаграмма as is**  
![](/images/diagrams/bpmn/as%20is:%20competitive%20payments.png)

### 

**Диаграмма to be**  
Диаграмма будущего процесса чётко показывает, что на стороне Платформы более не задействована роль работника по коммуникациям, который на текущий момент занимается отправкой писем о подписке и мониторит ошибки списания. Теперь эти моменты полностью забирает на себя Сервис интеграции, входящий в организационную структуру Платформы.   
![](/images/diagrams/bpmn/to%20be:recurrent.svg)
В данном процессе фигурирует подпроцесс “Выбор шаблона письма”.  
![](/images/diagrams/bpmn/to%20be:recurrent%20choosing%20email%20template.png)
