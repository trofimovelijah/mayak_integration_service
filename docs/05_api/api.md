## 7.1 Диаграмма последовательностей

Для удобства чтения, как и в случае с моделями процессов, диаграмма последовательностей была разбита на 3 частей. Диаграмма последовательности при работе с Событиями представлена ниже. Как видно, в ней задействованы все три пользовательские роли, а из внешних сервисов только сервисы рассылки.   
![](/images/diagrams/SequenceDiagram/sequenceDiagramAll/Events-page1.png) 
![](/images/diagrams/SequenceDiagram/sequenceDiagramAll/Events-page2.png) 

В случае с Платежами задействована только роль Благотворителя (исходим из того, что Пользователь Платформы также может быть Благотворителем, поэтому его выделение на диаграмме избыточно).  
![](/images/diagrams/SequenceDiagram/sequenceDiagramDonat/Donation.png)

В случае с Рекуррентными платежами расписаны последовательности при работе оформлением подписки, списаниями (в данном случае рассматриваются ежемесячные платежи) и отменой подписки вручную.  
![](/images/diagrams/SequenceDiagram/sequenceDiagramRPayment/Recurrent.png)

## 7.2 Список интеграций

Полностью спецификация представлена в [https://app.swaggerhub.com/apis-docs/aosu/mayak\_integration/1.0.0](https://app.swaggerhub.com/apis-docs/aosu/mayak_integration/1.0.0). При необходимости можно скачать [yaml спецификацию](openapi.yaml).   
Список интеграций представлен в таблице. Для дальнейшего использования (разработка, отладка и тестирование) достаточно применение спецификации, представленной по ссылке выше.   
Легенда интеграций по цветовой гамме представлена следующим образом:

* <span style="color: brown;">Битрикс</span> \- интеграции от Битрикса в Сервис интеграции \- в спецификации не представлены  
* <span style="color: pink;">Битрикс</span> \- триггеры от Битрикса \- в спецификации не представлены  
* <span style="color: lightblue;">POST /email/subscribers</span> \- встречаются в диаграммах последовательности не единожды и относятся к интеграциям с Unisender  
* <span style="color: lightgreen;">POST /email/send</span> \- многократно встречается API \- основной метод Сервиса интеграции  
* <span style="color: yellow;">POST /payments</span> \- интеграции с Платёжными сервисами от Сервиса интеграции  
* <span style="color: pink;">Webhook</span> \- вебхуки к Сервису интеграции \- в спецификации представлены, но потребуется их дальнейший пересмотр

| Требование | Действие | От кого | Соединение | Куда | Применяемые параметры | Ссылка на документацию |
| ----- | ----- | ----- | ----- | ----- | ----- | ----- |
| <span style="color: brown;">ФТ-022 | Регистрация пользователя и отправка письма благодарности | Битрикс | POST /emails/send | Сервис интеграции | user\_email \- адрес электронной почты регистрируемого Пользователя, user\_name \- имя Пользователя, agree\_newsletter \- флаг согласия на рассылку, registration\_date \- дата регистрации |  |
| <span style="color: lightblue;">ФТ-022 | Добавление email в рассылку (если согласие получено) | Сервис интеграции | POST /email/subscribers | Unisender | user\_email \- адрес для подписки, list\_id \- идентификатор списка рассылки, source \- источник: 'registration', timestamp \- время подписки | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/addSubscriber](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/addSubscriber)  |
| <span style="color: lightgreen;">ФТ-022 | Отправка письма благодарности за регистрацию | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, recipient\_email \- адрес получателя письма, vars={user\_name} \- имя Пользователя для подстановки в письмо | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-022 | Статус доставки письма | UnisenderGo | Webhook | Сервис интеграции | email\_id \- идентификатор письма message\_id \- идентификатор сообщения recipient\_email \- email отправителя template\_id \- идентификатор шаблона письма delivered\_at \- время доставки opened\_at \- время открытия | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/unisendergoDeliveryWebhook](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/unisendergoDeliveryWebhook)  |
| ФТ-021 | Напоминание создать Событие через 7 дней | Битрикс | POST /emails/send | Сервис интеграции | user\_id \- уникальный идентификатор Пользователя, user\_email \- адрес Пользователя, registration\_date \- дата регистрации для расчета 7-дневного периода, event\_exists \- было ли создано Событие? |  |
| ФТ-021 | Отправка письма с предложением создать Событие | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона, recipient\_email \- адрес получателя, vars={user\_name} \- имя Пользователя | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-024 | Создание События и отправка его на модерацию | Битрикс | POST /events/moderation-notice | Сервис интеграции | event\_id \- уникальный идентификатор События, event\_name \- наименование События, event\_creator\_email \- email создателя События, event\_description \- описание События, images\_count \- количество изображений, target\_amount \- целевая сумма Сбора, event\_date\_from \- дата начала События (пустая), event\_date\_to \- дата завершения События |  |
| ФТ-024 | Отправка письма о событии на модерацию | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона, recipient\_email \- email создателя События, vars={event\_name, event\_id}- название События и его идентификатор | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-025 | Одобрение События Администратором при модерации | Администратор | POST /events/{event\_id}/approve | Сервис интеграции | event\_id \- идентификатор События для одобрения, admin\_id \- идентификатор администратора, event\_name \- наименование События, event\_creator\_email \- email создателя События, event\_description \- описание События, images\_count \- количество изображений, target\_amount \- целевая сумма Сбора, event\_date\_from \- дата начала События (текущая), event\_date\_to \- дата завершения События comment \- комментарий администратора | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EventsModeration/approveEvent](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EventsModeration/approveEvent)  |
| ФТ-025 | Отклонение События Администратором при модерации | Администратор | POST /events/{event\_id}/reject | Сервис интеграции | event\_id \- идентификатор События для одобрения, admin\_id \- идентификатор администратора, event\_name \- наименование События, event\_creator\_email \- email создателя События, event\_description \- описание События, images\_count \- количество изображений, target\_amount \- целевая сумма Сбора, event\_date\_finish \- дата отклонения События rejection\_reason \- комментарий администратора | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EventsModeration/rejectEvent](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EventsModeration/rejectEvent)  |
| ФТ-025 | Обновление статуса события в Битриксе (одобрено) | Сервис интеграции | Webhook:event.approved | Битрикс | event\_id \- идентификатор События, status='published' \- новый статус, updated\_at \- время обновления |  |
| ФТ-025 | Отправка письма об одобрении События | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, recipient\_email \- email создателя События, vars={event\_name, event\_url} \- название События и ссылка на него | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-026 | Обновление статуса события в Битриксе (отклонено) | Сервис интеграции | Webhook:event.rejected | Битрикс | event\_id \- идентификатор События, status='rejected' \- новый статус, rejection\_reason \- причина отклонения, rejected\_at \- время отклонения |  |
| ФТ-026 | Отправка письма об отклонении События | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона отклонения, recipient\_email \- email создателя События, vars={event\_name, rejection\_reason} \- название События и причина отклонения | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-003 | Завершение События и отправка письма создателю | Битрикс | POST /events/closed | Сервис интеграции | event\_id \- идентификатор завершённого События, total\_amount \- итоговая сумма, собранная за Событие,  event\_creator\_email \- email создателя События, event\_name \- название События, closed\_at \- дата завершения |  |
| ФТ-003 | Отправка письма об окончании сбора создателю события | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона, recipient\_email \- email создателя События, vars={total\_amount, event\_name} \- сумма и название События | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-006 | Отправка письма об окончании сбора всем благотворителям | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, list\_id \- идентификатор списка Благотворителей для данного События,  vars={total\_amount, event\_name} \- собранная сумма и название События, body \- HTML-тело письма, subject \- тема письма. | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-027 | Отправка письма об окончании сбора с нулевой суммой | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона, recipient\_email \- email создателя События, vars={total\_amount=0, event\_name} \- название События | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-023 | Напоминание за 2 недели до дня рождения | Битрикс | POST /emails/send | Сервис интеграции | user\_id \- идентификатор Пользователя, user\_email  \- адрес Пользователя, birth\_date \- дата рождения Пользователя, user\_name \- имя Пользователя |  |
| ФТ-023 | Отправка письма с предложением создать Событие к дню рождения | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона, recipient\_email \- email Пользователя, vars={user\_name, birth\_date} \- имя Пользователя и дата рождения | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-005/007/008 | Инициирование платежа (пожертвование) | Битрикс | POST /donations/process | Сервис интеграции | donor\_email \- адрес Благотворителя, donor\_amount \- сумма пожертвования в рублях, event\_id \- идентификатор события, agree\_newsletter \- согласие на рассылку, currency='RUB' \- валюта |  |
| ФТ-005/007/008 | Добавление email в рассылку при пожертвовании (если согласие) | Сервис интеграции | POST /email/subscribers | Unisender | mailing\_email \- адрес Благотворителя для подписки, list\_id \- идентификатор списка рассылки, source='donation' \- источник подписки, timestamp \- время подписки | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/addSubscriber](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/addSubscriber)  |
| ФТ-005/007/008 | Инициирование платежа в платежной системе | Сервис интеграции | POST /payments | CloudPayments | donor\_amount \- сумма платежа в копейках: amount\*100, currency='RUB' \- валюта, donor\_email \- email рекуррентного Благодарителя | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/initiatePayment](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/initiatePayment)  |
| ФТ-005/007/008 | Получение результата платежа (webhook успешного платежа) | CloudPayments | Webhook POST /webhooks/cloudpayments/pay | Сервис интеграции | transactionId \- идентификатор транзакции в CloudPayments, donor\_amount  \- сумма платежа, currency='RUB' \- валюта, donor\_email \- email рекуррентного Благодарителя, status='Completed' \- статус успешного платежа | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/cloudpaymentsPaymentSuccess](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/cloudpaymentsPaymentSuccess)  |
| ФТ-005/007/008 | Определение типа письма и отправка письма благодарности | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, donor\_email \- email Благотворителя, vars={donor\_amount, event\_name, is\_first\_donation} \- сумма, Событие, флаг первого пожертвования | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-010 | Получение результата платежа (webhook ошибки платежа) | CloudPayments | Webhook POST /webhooks/cloudpayments/fail | Сервис интеграции | transactionId \- идентификатор транзакции в CloudPayments, donor\_amount  \- сумма платежа, currency='RUB' \- валюта, donor\_email \- email Благодарителя, reason \- причина отказа, status='Declined' \- статус отказа | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/cloudpaymentsPaymentFailed](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/cloudpaymentsPaymentFailed)  |
| ФТ-010 | Отправка письма об ошибке платежа | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма об ошибке, donor\_email \- email Благотворителя, vars={failure\_reason, retry\_link} \- причина отказа и ссылка для повтора | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-009 | Оформление рекуррентной подписки | Битрикс | POST /subscriptions/create | Сервис интеграции | recurrent\_email \- email рекуррентного Благотворителя, recurrent\_amount \- ежемесячная сумма в рублях, frequency \- периодичность ('monthly', 'quarterly', etc), agree\_newsletter \- согласие на рассылку, event\_id \- идентификатор События для подписки |  |
| ФТ-009 | Добавление email в рассылку при подписке (если согласие) | Сервис интеграции | POST /email/subscribers | Unisender | donor\_email \- email Благотворителя для рассылки, list\_id \- идентификатор списка рассылки, source='subscription' \- источник подписки, timestamp(время подписки) | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/addSubscriber](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/addSubscriber)  |
| ФТ-009 | Создание подписки в платежной системе | Сервис интеграции | POST /subscriptions | CloudPayments | recurrent\_amount \- сумма платежа в копейках: amount\*100, currency='RUB' \- валюта, recurrent\_email \- email Благотворителя, frequency \- периодичность ('monthly', 'quarterly', etc) | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/createSubscription](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/createSubscription)  |
| ФТ-009 | Отправка письма с деталями подписки | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, recurrent\_email \- email рекуррентного Благотворителя, vars={recurrent\_amount, frequency, manage\_link} \- сумма, периодичность, ссылка управления | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-005/012 | Ежемесячное списание (webhook о результате) | CloudPayments | Webhook POST /webhooks/cloudpayments/subscription | Сервис интеграции | subscriptionId \- идентификатор подписки в CloudPayments, recurrent\_amount \- сумма платежа в копейках: amount\*100, currency='RUB' \- валюта, recurrent\_email \- email Благотворителя, status='Completed' \- статус успешного списания, transactionId \- идентификатор транзакции в CloudPayments | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/cloudpaymentsSubscriptionCharge](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/cloudpaymentsSubscriptionCharge)  |
| ФТ-005/012 | Отправка письма благодарности за ежемесячное списание или за год поддержки | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, recurrent\_email \- email рекуррентного Благотворителя, vars={recurrent\_amount, next\_charge\_date, yearly\_stats} \- сумма, дата следующего списания, статистика за год | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-010 | Ежемесячное списание неудачное (webhook об ошибке) | CloudPayments | Webhook POST /webhooks/cloudpayments/fail | Сервис интеграции | subscriptionId \- идентификатор подписки в CloudPayments, recurrent\_amount \- сумма платежа в копейках: amount\*100, currency='RUB' \- валюта, recurrent\_email \- email Благотворителя, status=Declined'/'Error \- статус отказа в списании, reason \- причина отказа | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/cloudpaymentsPaymentFailed](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/cloudpaymentsPaymentFailed)  |
| ФТ-010/011 | Отправка письма об ошибке рекуррентного платежа (1-3 попытка) или об отмене (4-я попытка) | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, recurrent\_email \- email рекуррентного Благотворителя, vars={failure\_reason, next\_retry\_date, attempt\_number, manage\_link} \- причина, дата повтора, номер попытки, ссылка управления | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-011 | Ручная отмена подписки пользователем | Битрикс | POST /subscriptions/{subscription\_id}/cancel | Сервис интеграции | subscriptionId \- идентификатор подписки в CloudPayments, donor\_email \- email Благотворителя, reason \- причина отказа |  |
| ФТ-011 | Отмена подписки в платежной системе | Сервис интеграции | DELETE /subscriptions/{subscription\_id} | CloudPayments | subscriptionId \- идентификатор подписки в CloudPayments | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/PaymentsSubscriptions/cancelSubscription](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/PaymentsSubscriptions/cancelSubscription)  |
| ФТ-011 | Отправка прощального письма об отмене подписки | Сервис интеграции | POST /email/send | UnisenderGo | template\_id \- идентификатор шаблона письма, recurrent\_email \- email рекуррентного Благотворителя, vars={cancellation\_date, reactivate\_link} \- дата отмены, ссылка для возобновления | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EmailNotifications/sendEmailUniversal](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EmailNotifications/sendEmailUniversal)  |
| ФТ-025 | Получение списка Событий на модерацию | Администратор | GET /events?status=pending\_moderation  | Сервис интеграции | status='pending\_moderation' \- статус События, page, limit | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EventsModeration/moderationListEvent](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EventsModeration/moderationListEvent)  |
| ФТ-025 | Получение деталей События | Администратор | GET /events/{event\_id} | Сервис интеграции | event\_id \- идентификатор События admin\_id \- идентификатор Администратора event\_name \-  наименование События event\_creator\_email \- Пользователь, создавший Событие event\_description \- описание События images\_count \- число изображений target\_amount \- сумма сбора event\_date\_from \- дата создания События | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/EventsModeration/getEventDetails](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/EventsModeration/getEventDetails)  |
| ФТ-018 | Редактирование шаблона письма | Администратор | PUT /templates/{template\_id} | Сервис интеграции | template\_id \- идентификатор шаблона письма, subject \- тема письма, body\_html, body\_text, variables | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/Administration/updateTemplate](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/Administration/updateTemplate)  |
| ФТ-018 | Получение списка шаблонов | Администратор | GET /templates | Сервис интеграции | template\_id \- идентификатор шаблона письма | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/Administration/getTemplatesList](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/Administration/getTemplatesList)  |
| ФТ-018 | Получение деталей шаблона | Администратор | GET /templates/{template\_id} | Сервис интеграции | template\_id \- идентификатор шаблона письма | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/Administration/getTemplateDetails](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/Administration/getTemplateDetails)  |
| ФТ-019 | Список неотправленных писем | Администратор | GET /retry/list | Сервис интеграции | unsend\_email\_id \- идентификатор неотправленного письма, status='failed' \- статус письма, date\_from \- дата начала периода, date\_to \- дата окончания периода, page \- страница, limit \- ограничения | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/Administration/getUnsendEmailsList](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/Administration/getUnsendEmailsList)  |
| ФТ-019 | Переотправка выбранных писем | Администратор | POST /retry/send | Сервис интеграции | unsend\_email\_id \- идентификатор неотправленного письма | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/Administration/retrySendEmail](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/Administration/retrySendEmail)  |
| ФТ-013-017 | Просмотр статистики коммуникаций | Администратор | GET /statistics/summary | Сервис интеграции | date\_from \- дата начала периода, date\_to \- дата окончания периода, | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/getStatisticsSummary](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/getStatisticsSummary)  |
| НФТ-5.1 | Экспорт статистики в CSV | Администратор | GET /statistics/export/csv | Сервис интеграции | date\_from \- дата начала периода, date\_to \- дата окончания периода, format='csv' \- формат экспорта | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/exportStatisticsCSV](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/exportStatisticsCSV)  |
| НФТ-5.1 | Просмотр логов системы | Администратор | GET /logs | Сервис интеграции | date\_from \- дата начала периода, date\_to \- дата окончания периода, level \- уровень, component \- компонент, search\_text \- поиск по тексту, page \- страница, limit \- ограничения | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/getSystemLogs](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/getSystemLogs)  |
| НФТ-5.1 | Экспорт логов в CSV | Администратор | GET /logs/export/csv | Сервис интеграции | date\_from \- дата начала периода, date\_to \- дата окончания периода, level \- уровень, component \- компонент, format='csv' \- формат экспорта | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/exportLogsCSV](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/exportLogsCSV)  |
| НФТ-5.2 | Получение статуса сервисов и подсистем | Администратор | GET /monitoring/services | Сервис интеграции | service\_name \- название сервиса | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/getServicesStatus](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/getServicesStatus)  |
| НФТ-5.2 | Получение статуса очередей | Администратор | GET /monitoring/queues | Сервис интеграции | \- | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/getQueuesStatus](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/getQueuesStatus)  |
| НФТ-5.2 | Получение alerts | Администратор | GET /monitoring/alerts | Сервис интеграции | severity \- уровни опасности, limit \- ограничения | [https://app.swaggerhub.com/apis/aosu/mayak\_integration/1.0.0\#/StatisticsMonitoring/getActiveAlerts](https://app.swaggerhub.com/apis/aosu/mayak_integration/1.0.0#/StatisticsMonitoring/getActiveAlerts)  |