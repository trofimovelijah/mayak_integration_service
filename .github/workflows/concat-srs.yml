name: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ SRS

on:
  push:
    branches: 
      - main
    paths:
      - 'docs/01_specifications/*.md'
  workflow_dispatch:

permissions:
  contents: write

jobs:
  concatenate-docs:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        uses: actions/checkout@v4
        
      - name: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        run: |
          cd docs/01_specifications
          
          echo "# Software Requirements Specification (SRS)" > FULL_SRS.md
          echo "# –ü–ª–∞–Ω —Ä–∞–±–æ—Ç - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ú–∞—è–∫" >> FULL_SRS.md
          echo "" >> FULL_SRS.md
          echo "**–í–µ—Ä—Å–∏—è:** 1.0  " >> FULL_SRS.md
          echo "**–î–∞—Ç–∞:** $(date +%d-%m-%Y)  " >> FULL_SRS.md
          echo "**–°—Ç–∞—Ç—É—Å:** Active" >> FULL_SRS.md
          echo "" >> FULL_SRS.md
          echo "---" >> FULL_SRS.md
          echo "" >> FULL_SRS.md
          
          # –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
          files=(
            "1_introduction.md"
            "2_roles_glossary.md"
            "3_business_requirements.md"
            "4_functional_requirements.md"
            "5_non-functional_requirements.md"
          )
          
          # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
          for file in "${files[@]}"; do
            if [ -f "$file" ]; then
              echo "–î–æ–±–∞–≤–ª—è–µ–º: $file"
              echo "" >> FULL_SRS.md
              cat "$file" >> FULL_SRS.md
              echo "" >> FULL_SRS.md
              echo "" >> FULL_SRS.md
              echo "---" >> FULL_SRS.md
              echo "" >> FULL_SRS.md
            else
              echo "‚ö†Ô∏è  –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: $file"
            fi
          done
          
          echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç FULL_SRS.md —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ"
          
      - name: –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action Bot"
          git add docs/01_specifications/FULL_SRS.md
          git diff --quiet && git diff --staged --quiet || (git commit -m "ü§ñ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ SRS" && git push)
