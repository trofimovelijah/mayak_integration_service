name: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ SRS

on:
  push:
    branches: 
      - main
    paths:
      - '*.md'
      - '1_introduction.md'
      - '2_roles_glossary.md'
      - '3_business_requirements.md'
      - '4_functional_requirements.md'
      - '5_non-functional_requirements.md'
  workflow_dispatch: 

permissions:
  contents: write

jobs:
  concatenate-docs:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        uses: actions/checkout@v4
        
      - name: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
        run: |
          echo "# Software Requirements Specification (SRS)" > FULL_SRS.md
          echo "# –ü–ª–∞–Ω —Ä–∞–±–æ—Ç - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ú–∞—è–∫" >> FULL_SRS.md
          echo "" >> FULL_SRS.md
          echo "**–í–µ—Ä—Å–∏—è:** 1.0  " >> FULL_SRS.md
          echo "**–î–∞—Ç–∞:** $(date +%d-%m-%Y)  " >> FULL_SRS.md
          echo "**–°—Ç–∞—Ç—É—Å:** Active" >> FULL_SRS.md
          echo "" >> FULL_SRS.md
          echo "---" >> FULL_SRS.md
          echo "" >> FULL_SRS.md
          
          # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
          for file in 1_introduction.md 2_roles_glossary.md 3_business_requirements.md 4_functional_requirements.md 5_non-functional_requirements.md; do
            if [ -f "$file" ]; then
              echo "" >> FULL_SRS.md
              cat "$file" >> FULL_SRS.md
              echo "" >> FULL_SRS.md
              echo "---" >> FULL_SRS.md
              echo "" >> FULL_SRS.md
            fi
          done
          
      - name: –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action Bot"
          git add FULL_SRS.md
          git diff --quiet && git diff --staged --quiet || (git commit -m "ü§ñ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ SRS" && git push)
